!function(t){function e(){var t=[];this.empty=function(){for(var e=0;e<t.length;e++)if(t[e])return!1;return!0},this.add=function(e){t.push(e)},this.addNext=function(e){var n,o=[],i=0;for(n=0;n<t.length;n++)t[n]&&(1==i&&o.push(e),o.push(t[n]),i++);2>i&&o.push(e),t=o},this.get=function(){for(var e=0;e<t.length;e++)if(t[e])return t[e];return!1},this.ack=function(){for(var e=0;e<t.length;e++)if(t[e]){delete t[e];break}this.empty()&&(t=[])}}function n(){var e={};this.add=function(t,n,o){return t=t.toLowerCase(),e[t]||(e[t]=[]),e[t].push({obj:n,tag:l(o,"tag")}),t+"-"+(e[t].length-1)},this.get=function(n,o,i){var a,s,r;if(n=n.toLowerCase(),!e[n]||!e[n].length)return null;for(s=o?e[n].length:-1,r=o?-1:1,a=0;a<e[n].length;a++)if(s+=r,e[n][s]){if(void 0!==i&&(void 0===e[n][s].tag||t.inArray(e[n][s].tag,i)<0))continue;return e[n][s].obj}return null},this.all=function(n,o){var i,a=[];if(n=n.toLowerCase(),!e[n]||!e[n].length)return a;for(i=0;i<e[n].length;i++)e[n][i]&&(void 0!==o&&(void 0===e[n][i].tag||t.inArray(e[n][i].tag,o)<0)||a.push(e[n][i].obj));return a},this.names=function(){var t,n=[];for(t in e)n.push(t);return n},this.refToObj=function(t){return t=t.split("-"),2==t.length&&e[t[0]]&&e[t[0]][t[1]]?e[t[0]][t[1]].obj:null},this.rm=function(n,o,i){var a,s,r;if(n=n.toLowerCase(),!e[n])return!1;if(void 0!==o)if(i)for(a=e[n].length-1;a>=0&&!(void 0!==e[n][a]&&void 0!==e[n][a].tag&&t.inArray(e[n][a].tag,o)>=0);a--);else for(a=0;a<e[n].length&&!(void 0!==e[n][a]&&void 0!==e[n][a].tag&&t.inArray(e[n][a].tag,o)>=0);a++);else a=i?e[n].length-1:0;if(!(a in e[n]))return!1;if("function"==typeof e[n][a].obj.setMap&&e[n][a].obj.setMap(null),"function"==typeof e[n][a].obj.remove&&e[n][a].obj.remove(),"function"==typeof e[n][a].obj.free&&e[n][a].obj.free(),delete e[n][a].obj,void 0!==o){for(r=[],s=0;s<e[n].length;s++)s!==a&&r.push(e[n][s]);e[n]=r}else i?e[n].pop():e[n].shift();return!0},this.clear=function(t,n,o,i){var a,s,r;if(t&&t.length)t=_(t);else{t=[];for(a in e)t.push(a)}for(s=0;s<t.length;s++)if(t[s]){if(r=t[s].toLowerCase(),!e[r])continue;if(n)this.rm(r,i,!0);else if(o)this.rm(r,i,!1);else for(;this.rm(r,i,!1););}}}function o(){var e,n=[],o=[],i=[],a=[],s=!1;this.events=function(){for(var t=0;t<arguments.length;t++)o.push(arguments[t])},this.startRedraw=function(){return s?!1:(s=!0,!0)},this.endRedraw=function(){s=!1},this.redraw=function(){var t,n=[],o=this;for(t=0;t<arguments.length;t++)n.push(arguments[t]);this.startRedraw?(e.apply(o,n),this.endRedraw()):setTimeout(function(){o.redraw.apply(o,n)},50)},this.setRedraw=function(t){e=t},this.store=function(t,e,n){i.push({data:t,obj:e,shadow:n})},this.free=function(){for(var t=0;t<o.length;t++)google.maps.event.removeListener(o[t]);o=[],this.freeAll()},this.freeIndex=function(t){"function"==typeof i[t].obj.setMap&&i[t].obj.setMap(null),"function"==typeof i[t].obj.remove&&i[t].obj.remove(),i[t].shadow&&("function"==typeof i[t].shadow.remove&&i[t].obj.remove(),"function"==typeof i[t].shadow.setMap&&i[t].shadow.setMap(null),delete i[t].shadow),delete i[t].obj,delete i[t].data,delete i[t]},this.freeAll=function(){var t;for(t=0;t<i.length;t++)i[t]&&this.freeIndex(t);i=[]},this.freeDiff=function(e){var n,o,a={},s=[];for(n=0;n<e.length;n++)s.push(e[n].idx.join("-"));for(n=0;n<i.length;n++)i[n]&&(o=t.inArray(i[n].data.idx.join("-"),s),o>=0?a[o]=!0:this.freeIndex(n));return a},this.add=function(t,e){n.push({latLng:t,marker:e})},this.get=function(t){return n[t]},this.clusters=function(t,e,o,i){var s,r,l,d,c,g,p,f,u,h,m,v,y,_,w=t.getProjection(),L=w.fromLatLngToPoint(new google.maps.LatLng(t.getBounds().getNorthEast().lat(),t.getBounds().getSouthWest().lng())),b=t.getZoom(),x={},k={},M={},E=[],S=t.getBounds(),C=o&&o<=t.getZoom(),j=t.getZoom()>2;for(_=0,y={},s=0;s<n.length;s++)(!j||S.contains(n[s].latLng))&&(d=w.fromLatLngToPoint(n[s].latLng),x[s]=[Math.floor((d.x-L.x)*Math.pow(2,b)),Math.floor((d.y-L.y)*Math.pow(2,b))],y[s]=!0,_++);if(!i&&!C){for(p=0;p<a.length&&p in y;p++)_--;if(!_)return!1}a=y,y=[];for(s in x)c=x[s][0],g=x[s][1],c in k||(k[c]={}),g in k[c]||(k[c][g]=s,M[s]={},y.push(s)),M[k[c][g]][s]=!0;for(e=Math.pow(e,2),delete k,p=0;;){for(;p<y.length&&!(y[p]in M);)p++;if(p==y.length)break;if(s=y[p],m=x[s][0],v=x[s][1],k=null,C)k={lat:m,lng:v,idx:[s]};else do{for(u={lat:0,lng:0,idx:[]},f=p;f<y.length;f++)if(y[f]in M&&(r=y[f],Math.pow(m-x[r][0],2)+Math.pow(v-x[r][1],2)<=e))for(l in M[r])u.lat+=n[l].latLng.lat(),u.lng+=n[l].latLng.lng(),u.idx.push(l);u.lat/=u.idx.length,u.lng/=u.idx.length,k?(h=u.idx.length>k.idx.length,h&&(k=u)):(h=u.idx.length>1,k=u),h&&(d=w.fromLatLngToPoint(new google.maps.LatLng(k.lat,k.lng)),m=Math.floor((d.x-L.x)*Math.pow(2,b)),v=Math.floor((d.y-L.y)*Math.pow(2,b)))}while(h);for(f=0;f<k.idx.length;f++)k.idx[f]in M&&delete M[k.idx[f]];E.push(k)}return E},this.getBounds=function(){var t,e=new google.maps.LatLngBounds;for(t=0;t<n.length;t++)e.extend(n[t].latLng);return e}}function i(e){for(var n in e)"object"==typeof x[n]?x[n]=t.extend({},x[n],e[n]):x[n]=e[n]}function a(t){if(!t)return!0;for(var e=0;e<E.length;e++)if(E[e]===t)return!1;return!0}function s(t){for(var e=l(t,"action"),n=0;n<S.length;n++)if(S[n]===e)return!0;return!1}function r(t,e){if(e.toLowerCase){e=e.toLowerCase();for(var n in t)if(n.toLowerCase&&n.toLowerCase()==e)return n}return!1}function l(t,e,n){var o=r(t,e);return o?t[o]:n}function d(t,e){var n,o;if(!t||!e)return!1;e=_(e);for(n in t)if(n.toLowerCase){n=n.toLowerCase();for(o in e)if(n==e[o])return!0}return!1}function c(t,e,n){if(d(t,M)||d(t,e)){var o,i;for(o=0;o<M.length;o++)i=r(t,M[o]),n[M[o]]=i?t[i]:{};if(e&&e.length)for(o=0;o<e.length;o++)(i=r(t,e[o]))&&(n[e[o]]=t[i]);return n}n.options={};for(i in t)"action"!==i&&(n.options[i]=t[i]);return n}function g(t,e,n,o){var i,a=r(e,t),s={},g=["map"];if(s.callback=l(e,"callback"),n=_(n),o=_(o),a)return c(e[a],n,s);if(o&&o.length)for(i=0;i<o.length;i++)g.push(o[i]);for(d(e,g)||(s=c(e,n,s)),i=0;i<M.length;i++)M[i]in s||(s[M[i]]={});return s}function p(){return C||(C=new google.maps.Geocoder),C}function f(){return directionsService||(directionsService=new google.maps.DirectionsService),directionsService}function u(){return elevationService||(elevationService=new google.maps.ElevationService),elevationService}function h(){return maxZoomService||(maxZoomService=new google.maps.MaxZoomService),maxZoomService}function m(){return distanceMatrixService||(distanceMatrixService=new google.maps.DistanceMatrixService),distanceMatrixService}function v(t){return("number"==typeof t||"string"==typeof t)&&""!==t&&!isNaN(t)}function _(t){var e,n=[];if(void 0!==t)if("object"==typeof t)if("number"==typeof t.length)n=t;else for(e in t)n.push(t[e]);else n.push(t);return n}function w(t,e,n){var o=e?t:null;return t&&"string"!=typeof t?t.latLng?w(t.latLng):"function"==typeof t.lat?t:v(t.lat)?new google.maps.LatLng(t.lat,t.lng):!n&&t.length&&v(t[0])&&v(t[1])?new google.maps.LatLng(t[0],t[1]):o:o}function L(t,e,n){var o,i,a;return t?(a=n?t:null,"function"==typeof t.getCenter?t:(t.length?2==t.length?(o=w(t[0]),i=w(t[1])):4==t.length&&(o=w([t[0],t[1]]),i=w([t[2],t[3]])):"ne"in t&&"sw"in t?(o=w(t.ne),i=w(t.sw)):"n"in t&&"e"in t&&"s"in t&&"w"in t&&(o=w([t.n,t.e]),i=w([t.s,t.w])),o&&i?new google.maps.LatLngBounds(i,o):a)):null}function b(s){var r=new e,c=new n,v=null,b={},M=!1;this._plan=function(t){for(var e=0;e<t.length;e++)r.add(t[e]);this._run()},this._planNext=function(t){r.addNext(t)},this._direct=function(e){var n=l(e,"action");return this[n](t.extend({},n in x?x[n]:{},e.args?e.args:e))},this._end=function(){M=!1,r.ack(),this._run()},this._run=function(){if(!M){var t=r.get();t&&(M=!0,this._proceed(t))}},this._proceed=function(e){e=e||{};var n,o=l(e,"action")||"init",i=o.toLowerCase(),s=!0,r=l(e,"target"),d=l(e,"args");!v&&a(i)&&this.init(t.extend({},x.init,e.args&&e.args.map?e.args.map:e.map?e.map:{}),!0),!r&&!d&&i in this&&"function"==typeof this[i]?this[i](t.extend({},i in x?x[i]:{},e.args?e.args:e)):(r&&"object"==typeof r?(s="function"==typeof r[o])&&(n=r[o].apply(r,e.args?e.args:[])):v&&(s="function"==typeof v[o])&&(n=v[o].apply(v,e.args?e.args:[])),!s&&x.verbose&&alert("unknown action : "+o),this._callback(n,e),this._end())},this._resolveLatLng=function(t,e,n,o){var i,a=l(t,"address"),s=this,r="function"==typeof e?e:s[e];a?(o||(o=0),i="object"==typeof a?a:{address:a},p().geocode(i,function(i,a){a===google.maps.GeocoderStatus.OK?r.apply(s,[t,n?i:i[0].geometry.location]):a===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&o<x.queryLimit.attempt?setTimeout(function(){s._resolveLatLng(t,e,n,o+1)},x.queryLimit.delay+Math.floor(Math.random()*x.queryLimit.random)):(x.verbose&&alert("Geocode error : "+a),r.apply(s,[t,!1]))})):r.apply(s,[t,w(t,!1,!0)])},this._resolveAllLatLng=function(t,e,n){var o=this,i=-1,a=function(){do i++;while(i<t[e].length&&!("address"in t[e][i]));i<t[e].length?!function(t){o._resolveLatLng(t,function(t,e){t.latLng=e,a.apply(o,[])})}(t[e][i]):o[n](t)};a()},this._call=function(){var t,e=arguments[0],n=[];if(arguments.length&&v&&"function"==typeof v[e]){for(t=1;t<arguments.length;t++)n.push(arguments[t]);return v[e].apply(v,n)}},this._subcall=function(e,n){var o={};e.map&&(n||(n=l(e.map,"latlng")),v?(e.map.center&&n&&this._call("setCenter",n),void 0!==e.map.zoom&&this._call("setZoom",e.map.zoom),void 0!==e.map.mapTypeId&&this._call("setMapTypeId",e.map.mapTypeId)):(n&&(o={center:n}),this.init(t.extend({},e.map,o),!0)))},this._attachEvent=function(t,e,n,o,i){google.maps.event["addListener"+(i?"Once":"")](t,e,function(e){n.apply(s,[t,e,o])})},this._attachEvents=function(t,e){var n;if(e){if(e.events)for(n in e.events)"function"==typeof e.events[n]&&this._attachEvent(t,n,e.events[n],e.data,!1);if(e.onces)for(n in e.onces)"function"==typeof e.onces[n]&&this._attachEvent(t,n,e.onces[n],e.data,!0)}},this._callback=function(t,e){if("function"==typeof e.callback)e.callback.apply(s,[t]);else if("object"==typeof e.callback)for(var n=0;n<e.callback.length;n++)"function"==typeof e.callback[n]&&e.callback[k].apply(s,[t])},this._manageEnd=function(t,e,n){var o,i;if(t&&"object"==typeof t&&(this._attachEvents(t,e),e.apply&&e.apply.length))for(o=0;o<e.apply.length;o++)i=e.apply[o],i.action&&"function"==typeof t[i.action]&&(i.args?t[i.action].apply(t,i.args):t[i.action]());n||(this._callback(t,e),this._end())},this.destroy=function(t){var e;c.clear(),s.empty();for(e in b)delete b[e];b={},v&&delete v,this._callback(null,t),this._end()},this.init=function(e,n){var o,i,a;if(v)return this._end();if(o=g("map",e),"boolean"==typeof o.options.center&&o.options.center)return!1;a=t.extend({},x.init,o.options),a.center||(a.center=[x.init.center.lat,x.init.center.lng]),a.center=w(a.center),v=new x.classes.Map(s.get(0),a);for(i in b)v.mapTypes.set(i,b[i]);return this._manageEnd(v,o,n),!0},this.getlatlng=function(t){this._resolveLatLng(t,"_getLatLng",!0)},this._getLatLng=function(t,e){this._manageEnd(e,t)},this.getaddress=function(t,e){var n=w(t,!1,!0),o=l(t,"address"),i=n?{latLng:n}:o?"string"==typeof o?{address:o}:o:null,a=l(t,"callback"),r=this;e||(e=0),i&&"function"==typeof a?p().geocode(i,function(n,o){if(o===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&e<x.queryLimit.attempt)setTimeout(function(){r.getaddress(t,e+1)},x.queryLimit.delay+Math.floor(Math.random()*x.queryLimit.random));else{var i=o===google.maps.GeocoderStatus.OK?n:!1;a.apply(s,[i,o]),!i&&x.verbose&&alert("Geocode error : "+o),r._end()}}):this._end()},this.getroute=function(t){var e=l(t,"callback"),n=this;"function"==typeof e&&t.options?(t.options.origin=w(t.options.origin,!0),t.options.destination=w(t.options.destination,!0),f().route(t.options,function(t,o){var i=o==google.maps.DirectionsStatus.OK?t:!1;e.apply(s,[i,o]),n._end()})):this._end()},this.getelevation=function(t){var e,n,o,i,a=[],r=l(t,"callback"),d=l(t,"latlng"),c=this;if("function"==typeof r){if(e=function(t,e){var n=e===google.maps.ElevationStatus.OK?t:!1;r.apply(s,[n,e]),c._end()},d)a.push(w(d));else if(a=l(t,"locations")||[])for(a=_(a),i=0;i<a.length;i++)a[i]=w(a[i]);if(a.length)u().getElevationForLocations({locations:a},e);else if(n=l(t,"path"),o=l(t,"samples"),n&&o){for(i=0;i<n.length;i++)a.push(w(n[i]));a.length&&u().getElevationAlongPath({path:a,samples:o},e)}}else this._end()},this.getdistance=function(t){var e,n=l(t,"callback"),o=this;if("function"==typeof n&&t.options&&t.options.origins&&t.options.destinations){for(t.options.origins=_(t.options.origins),e=0;e<t.options.origins.length;e++)t.options.origins[e]=w(t.options.origins[e],!0);for(t.options.destinations=_(t.options.destinations),e=0;e<t.options.destinations.length;e++)t.options.destinations[e]=w(t.options.destinations[e],!0);m().getDistanceMatrix(t.options,function(t,e){var i=e==google.maps.DistanceMatrixStatus.OK?t:!1;n.apply(s,[i,e]),o._end()})}else this._end()},this.addmarker=function(t){this._resolveLatLng(t,"_addMarker")},this._addMarker=function(t,e,n){var o,i,a,s=g("marker",t,"to");if(n){if(!e)return}else{if(!e)return void this._manageEnd(!1,s);this._subcall(t,e)}return s.to?(a=c.refToObj(s.to),o=a&&"function"==typeof a.add,o&&(a.add(e,t),"function"==typeof a.redraw&&a.redraw()),n||this._manageEnd(o,s)):(s.options.position=e,s.options.map=v,o=new x.classes.Marker(s.options),d(t,"infowindow")&&(i=g("infowindow",t.infowindow,"open"),(void 0===i.open||i.open)&&(i.apply=_(i.apply),i.apply.unshift({action:"open",args:[v,o]})),i.action="addinfowindow",this._planNext(i)),n||(c.add("marker",o,s),this._manageEnd(o,s))),o},this.addmarkers=function(t){l(t,"clusters")?this._resolveAllLatLng(t,"markers","_addclusteredmarkers"):this._resolveAllLatLng(t,"markers","_addmarkers")},this._addmarkers=function(e){var n,o,i,a,s,r,d,p={},f=l(e,"markers");if(this._subcall(e),"object"!=typeof f)return this._end();if(o=g("marker",e,["to","markers"]),o.to){if(d=c.refToObj(o.to),n=d&&"function"==typeof d.add){for(i=0;i<f.length;i++)(a=w(f[i]))&&d.add(a,f[i]);"function"==typeof d.redraw&&d.redraw()}this._manageEnd(n,o)}else{for(t.extend(!0,p,o.options),p.map=v,n=[],i=0;i<f.length;i++)(a=w(f[i]))&&(f[i].options?(r={},t.extend(!0,r,p,f[i].options),o.options=r):o.options=p,o.options.position=a,s=new x.classes.Marker(o.options),n.push(s),o.data=f[i].data,o.tag=f[i].tag,c.add("marker",s,o),this._manageEnd(s,o,!0));o.options=p,this._callback(n,e),this._end()}},this._addclusteredmarkers=function(t){var e,n,i,a,s=this,r=l(t,"radius"),d=l(t,"maxZoom"),c=l(t,"markers"),g=l(t,"clusters");if(!v.getBounds())return void google.maps.event.addListenerOnce(v,"bounds_changed",function(){s._addclusteredmarkers(t)});if("number"==typeof r){for(e=new o,n=0;n<c.length;n++)i=w(c[n]),e.add(i,c[n]);a=this._initClusters(t,e,r,d,g)}this._callback(a,t),this._end()},this._initClusters=function(t,e,n,o,i){var a=this;return e.setRedraw(function(s){var r,l=e.clusters(v,n,o,s);l&&(r=e.freeDiff(l),a._displayClusters(t,e,l,r,i))}),e.events(google.maps.event.addListener(v,"zoom_changed",function(){e.redraw(!0)}),google.maps.event.addListener(v,"bounds_changed",function(){e.redraw()})),e.redraw(),c.add("cluster",e,t)},this._displayClusters=function(e,n,o,i,a){var s,r,c,p,f,u,h,m,v,y,_,L,b,x=d(e,"cluster")?g("",l(e,"cluster")):{},k=d(e,"marker")?g("",l(e,"marker")):{};for(r=0;r<o.length;r++)if(!(r in i)){if(m=o[r],f=!1,m.idx.length>1){p=0;for(s in a)s>p&&s<=m.idx.length&&(p=s);if(a[p]){for(_=l(a[p],"width"),L=l(a[p],"height"),b={},t.extend(!0,b,x,{options:{pane:"overlayLayer",content:a[p].content.replace("CLUSTER_COUNT",m.idx.length),offset:{x:-_/2,y:-L/2}}}),u=this._addOverlay(b,w(m),!0),b.options.pane="floatShadow",b.options.content=t("<div></div>"),b.options.content.width(_),b.options.content.height(L),h=this._addOverlay(b,w(m),!0),x.data={latLng:w(m),markers:[]},c=0;c<m.idx.length;c++)x.data.markers.push(n.get(m.idx[c]).marker);this._attachEvents(h,x),n.store(m,u,h),f=!0}}if(!f){for(v={},t.extend(!0,v,k.options),c=0;c<m.idx.length;c++)p=n.get(m.idx[c]),k.latLng=p.latLng,k.data=p.marker.data,k.tag=p.marker.tag,p.marker.options?(y={},t.extend(!0,y,v,p.marker.options),k.options=y):k.options=v,u=this._addMarker(k,k.latLng,!0),this._attachEvents(u,k),n.store(m,u);k.options=v}}},this.addinfowindow=function(t){this._resolveLatLng(t,"_addInfoWindow")},this._addInfoWindow=function(t,e){var n,o,i=[];this._subcall(t,e),n=g("infowindow",t,["open","anchor"]),e&&(n.options.position=e),o=new x.classes.InfoWindow(n.options),(void 0===n.open||n.open)&&(n.apply=_(n.apply),i.push(v),n.anchor&&i.push(n.anchor),n.apply.unshift({action:"open",args:i})),c.add("infowindow",o,n),this._manageEnd(o,n)},this.addpolyline=function(t){this._addPoly(t,"Polyline","path")},this.addpolygon=function(t){this._addPoly(t,"Polygon","paths")},this._addPoly=function(t,e,n){var o,i,a,s=g(e.toLowerCase(),t,n);if(s[n])for(s.options[n]=[],o=0;o<s[n].length;o++)(a=w(s[n][o]))&&s.options[n].push(a);i=new google.maps[e](s.options),i.setMap(v),c.add(e.toLowerCase(),i,s),this._manageEnd(i,s)},this.addcircle=function(t){this._resolveLatLng(t,"_addCircle")},this._addCircle=function(t,e){var n,o=g("circle",t);return e||(e=w(o.options.center)),e?(this._subcall(t,e),o.options.center=e,o.options.map=v,n=new x.classes.Circle(o.options),c.add("circle",n,o),void this._manageEnd(n,o)):this._manageEnd(!1,o)},this.addrectangle=function(t){this._resolveLatLng(t,"_addRectangle")},this._addRectangle=function(t,e){var n,o=g("rectangle",t);return o.options.bounds=L(o.options.bounds,!0),o.options.bounds?(this._subcall(t,o.options.bounds.getCenter()),o.options.map=v,n=new x.classes.Rectangle(o.options),c.add("rectangle",n,o),void this._manageEnd(n,o)):this._manageEnd(!1,o)},this.addoverlay=function(t){this._resolveLatLng(t,"_addOverlay")},this._addOverlay=function(e,n,o){function i(){x.classes.OverlayView.call(this),this.setMap(v)}var a,s=g("overlay",e),r=t.extend({pane:"floatPane",content:"",offset:{x:0,y:0}},s.options),l=t("<div></div>"),d=[];return l.css("border","none").css("borderWidth","0px").css("position","absolute"),l.append(r.content),i.prototype=new x.classes.OverlayView,i.prototype.onAdd=function(){var e=this.getPanes();r.pane in e&&t(e[r.pane]).append(l)},i.prototype.draw=function(){var e=this.getProjection(),o=e.fromLatLngToDivPixel(n),i=this;l.css("left",o.x+r.offset.x+"px").css("top",o.y+r.offset.y+"px"),t.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(t,e){d.push(google.maps.event.addDomListener(l[0],e,function(t){google.maps.event.trigger(i,e)}))}),d.push(google.maps.event.addDomListener(l[0],"contextmenu",function(t){google.maps.event.trigger(i,"rightclick")}))},i.prototype.onRemove=function(){for(var t=0;t<d.length;t++)google.maps.event.removeListener(d[t]);l.remove()},i.prototype.hide=function(){l.hide()},i.prototype.show=function(){l.show()},i.prototype.toggle=function(){l&&(l.is(":visible")?this.show():this.hide())},i.prototype.toggleDOM=function(){this.getMap()?this.setMap(null):this.setMap(v)},i.prototype.getDOMElement=function(){return l[0]},a=new i,o||(c.add("overlay",a,s),this._manageEnd(a,s)),a},this.addfixpanel=function(e){var n,o,i=g("fixpanel",e),a=y=0;i.options.content&&(n=t(i.options.content),void 0!==i.options.left?a=i.options.left:void 0!==i.options.right?a=s.width()-n.width()-i.options.right:i.options.center&&(a=(s.width()-n.width())/2),void 0!==i.options.top?y=i.options.top:void 0!==i.options.bottom?y=s.height()-n.height()-i.options.bottom:i.options.middle&&(y=(s.height()-n.height())/2),o=t("<div></div>").css("position","absolute").css("top",y+"px").css("left",a+"px").css("z-index","1000").append(n),s.first().prepend(o),this._attachEvents(v,i),c.add("fixpanel",o,i),this._callback(o,i)),this._end()},this.adddirectionsrenderer=function(t,e){var n,o=g("directionrenderer",t,"panelId");return o.options.map=v,n=new google.maps.DirectionsRenderer(o.options),o.panelId&&n.setPanel(document.getElementById(o.panelId)),c.add("directionrenderer",n,o),this._manageEnd(n,o,e),n},this.setdirectionspanel=function(t){var e=c.get("directionrenderer"),n=g("directionpanel",t,"id");e&&n.id&&e.setPanel(document.getElementById(n.id)),this._manageEnd(e,n)},this.setdirections=function(t){var e=c.get("directionrenderer"),n=g("directions",t);t&&(n.options.directions=t.directions?t.directions:t.options&&t.options.directions?t.options.directions:null),n.options.directions&&(e?e.setDirections(n.options.directions):e=this.adddirectionsrenderer(n,!0)),this._manageEnd(e,n)},this.setstreetview=function(t){var e,n=g("streetview",t,"id");n.options.position&&(n.options.position=w(n.options.position)),e=new x.classes.StreetViewPanorama(document.getElementById(n.id),n.options),e&&v.setStreetView(e),this._manageEnd(e,n)},this.addkmllayer=function(t){var e,n=g("kmllayer",t,"url");n.options.map=v,"string"==typeof n.url&&(e=new x.classes.KmlLayer(n.url,n.options)),c.add("kmllayer",e,n),this._manageEnd(e,n)},this.addtrafficlayer=function(t){var e=g("trafficlayer",t),n=c.get("trafficlayer");n||(n=new x.classes.TrafficLayer,n.setMap(v),c.add("trafficlayer",n,e)),this._manageEnd(n,e)},this.addbicyclinglayer=function(t){var e=g("bicyclinglayer",t),n=c.get("bicyclinglayer");n||(n=new x.classes.BicyclingLayer,n.setMap(v),c.add("bicyclinglayer",n,e)),this._manageEnd(n,e)},this.addgroundoverlay=function(t){var e,n=g("groundoverlay",t,["bounds","url"]);n.bounds=L(n.bounds),n.bounds&&"string"==typeof n.url&&(e=new x.classes.GroundOverlay(n.url,n.bounds),e.setMap(v),c.add("groundoverlay",e,n)),this._manageEnd(e,n)},this.geolatlng=function(t){var e=l(t,"callback");"function"==typeof e&&(navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var n=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);e.apply(s,[n])},function(){var t=!1;e.apply(s,[t])}):google.gears?google.gears.factory.create("beta.geolocation").getCurrentPosition(function(t){var n=new google.maps.LatLng(t.latitude,t.longitude);e.apply(s,[n])},function(){out=!1,e.apply(s,[out])}):e.apply(s,[!1])),this._end()},this.addstyledmap=function(t,e){var n=g("styledmap",t,["id","style"]);n.style&&n.id&&!b[n.id]&&(b[n.id]=new x.classes.StyledMapType(n.style,n.options),v&&v.mapTypes.set(n.id,b[n.id])),this._manageEnd(b[n.id],n,e)},this.setstyledmap=function(t){var e=g("styledmap",t,["id","style"]);e.id&&(this.addstyledmap(e,!0),b[e.id]&&(v.setMapTypeId(e.id),this._callback(b[e.id],t))),this._manageEnd(b[e.id],e)},this.clear=function(t){var e=_(l(t,"list")||l(t,"name")),n=l(t,"last",!1),o=l(t,"first",!1),i=l(t,"tag");void 0!==i&&(i=_(i)),c.clear(e,n,o,i),this._end()},this.get=function(t){var e=l(t,"name")||"map",n=l(t,"first"),o=l(t,"all"),i=l(t,"tag");return e=e.toLowerCase(),"map"===e?v:(void 0!==i&&(i=_(i)),n?c.get(e,!1,i):o?c.all(e,i):c.get(e,!0,i))},this.getmaxzoom=function(t){this._resolveLatLng(t,"_getMaxZoom")},this._getMaxZoom=function(t,e){var n=l(t,"callback"),o=this;n&&"function"==typeof n?h().getMaxZoomAtLatLng(e,function(t){var e=t.status===google.maps.MaxZoomStatus.OK?t.zoom:!1;n.apply(s,[e,t.status]),o._end()}):this._end()},this.setdefault=function(t){i(t),this._end()},this.autofit=function(t,e){var n,o,i,a,s,r=!0,d=new google.maps.LatLngBounds,g=l(t,"maxZoom",null);for(n=c.names(),a=0;a<n.length;a++)for(o=c.all(n[a]),s=0;s<o.length;s++)i=o[s],i.getPosition?(d.extend(i.getPosition()),r=!1):i.getBounds?(d.extend(i.getBounds().getNorthEast()),d.extend(i.getBounds().getSouthWest()),r=!1):i.getPaths?i.getPaths().forEach(function(t){t.forEach(function(t){d.extend(t),r=!1})}):i.getPath?i.getPath().forEach(function(t){d.extend(t),r=!1}):i.getCenter&&(d.extend(i.getCenter()),r=!1);r||v.getBounds()&&v.getBounds().equals(d)||(null!==g&&google.maps.event.addListenerOnce(v,"bounds_changed",function(){this.getZoom()>g&&this.setZoom(g)}),v.fitBounds(d)),e||this._manageEnd(r?!1:d,t,e)}}var x={verbose:!1,queryLimit:{attempt:5,delay:250,random:250},init:{mapTypeId:google.maps.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType}},M=["events","onces","options","apply","callback","data","tag"],E=["init","geolatlng","getlatlng","getroute","getelevation","getdistance","addstyledmap","setdefault","destroy"],S=["get"],C=directionsService=elevationService=maxZoomService=distanceMatrixService=null;t.fn.gmap3=function(){var e,n,o=[],a=!0,r=[];for(e=0;e<arguments.length;e++)n=arguments[e]||{},"string"==typeof n&&(n={action:n}),o.push(n);return o.length||o.push({}),t.each(this,function(){var e=t(this),n=e.data("gmap3");a=!1,n||(n=new b(e),e.data("gmap3",n)),1==o.length&&s(o[0])?r.push(n._direct(o[0])):n._plan(o)}),r.length?1===r.length?r[0]:r:(a&&2==arguments.length&&"string"==typeof arguments[0]&&"setdefault"===arguments[0].toLowerCase()&&i(arguments[1]),this)}}(jQuery);